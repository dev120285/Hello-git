package com.shiva.blessing.shiva;

import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.HashSet;
import java.util.LinkedList;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;
import java.util.TreeMap;
import java.util.regex.Pattern;

import org.apache.logging.log4j.Logger;
import org.springframework.util.AntPathMatcher;

public class PDJFAuthorizationMappingTest {
	

	public PDJFAuthorizationMappingTest()
	{
		super();
	}
	
	
	public static final Map<String,String> patternConfigMapper = new HashMap<>();
	public static final String[] PATH = {"/*/***/*/testnow.xhtml" ,"/*/**/**test.xhtml","/**/*/*t/*te/*tes/testing.xhtml"};

	static{
	
	patternConfigMapper.put("/**/*", "authenticated");
	patternConfigMapper.put("/**/*.xhtml", "authenticated-1");
	patternConfigMapper.put("/**", "authenticated-2");
	patternConfigMapper.put("/**/*", "authenticated-3");
	patternConfigMapper.put("/**/*", "authenticated-4");
	patternConfigMapper.put("/**/**/testn*.xhtml", "authenticated-5");
	patternConfigMapper.put("/test/testnow.xhtml", "authenticated-6");
	patternConfigMapper.put("/**/test/*.xhtml", "authenticated-7");
	}

	
	
	public static void main (String[] args)
	{
		 AntPathMatcher matcher = new AntPathMatcher();
		 LinkedList<String> urlStack = new LinkedList<>();
		 for(String temp:patternConfigMapper.keySet())
		 {
			 urlStack.add(temp); 
		 }
		 
		for (String path:PATH) 
		{
		 
		 Collections.sort(urlStack, matcher.getPatternComparator(path));
		 
		 
		 Map <String,String> sortedTreeMap = new TreeMap<>();
		
			 
			 for (Map.Entry<String, String> entry : patternConfigMapper.entrySet())
			 {
			   
			     for(String key2:urlStack)
				 {
					 if(key2.equalsIgnoreCase(entry.getKey()))
					 {
						 sortedTreeMap.put(key2, entry.getValue());
					 }
					 
				 }
			 }
			 System.out.println("*******Next Path****** ---->    " + path + "\n");
			 String toBeChecked ="public";
		 
			 for (Map.Entry<String, String> entry : sortedTreeMap.entrySet())
			 {
			     System.out.println("Key: " + entry.getKey() + ". Value: " + entry.getValue() +"\n");
			 }
			 String first = ((TreeMap<String, String>) sortedTreeMap).firstEntry().getValue();
			 System.out.println(first);
			
	    }
	
			
	}
		}
		




	



	

